#!/usr/bin/env zsh
# vim: filetype=sh

# startup time instrumentation start
# zmodload zsh/datetime
# setopt PROMPT_SUBST
# PS4='+$EPOCHREALTIME %N:%i> '
# logfile=$(mktemp zsh_profile.XXXXXXXX)
# echo "Logging to $logfile"
# exec 3>&2 2>$logfile
# setopt XTRACE

# dotfiles
export DOTFILES="${DOTFILES:-$HOME/.dotfiles}"

# load vars
source "${DOTFILES}/shell/aux/vars.sh"

# load plugins
source "${DOTFILES}/shell/aux/zplug.zsh"

# load helper functions
source "${DOTFILES}/shell/aux/core.zsh"

# load aliases
source "${DOTFILES}/shell/aliases/core.sh"

# load local custom config
source "${DOTFILES}/local/zshrc"

# fzf
if ${DOT_FZF:-false}; then
	source "${DOTFILES}/shell/bindings/fzf.zsh"
	include "${HOME}/.fzf.zsh"
fi

# fasd
if ${DOT_FASD:-false}; then
	eval "$(fasd --init posix-alias zsh-hook)"
fi

# startup time instrumentation end
# unsetopt XTRACE
# exec 2>&3 3>&-
